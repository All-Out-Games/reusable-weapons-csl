Standard_Projectile :: class : Component {
    damage: float;
    lifetime: float;
    direction: v2;
    owner_id: u64;
    speed: float;
    max_lifetime: float;

    ao_update :: method(dt: float) {
        lifetime += dt;
        if max_lifetime <= 0 {
            max_lifetime = 3.0;
        }
        if lifetime > max_lifetime {
            entity->destroy();
            return;
        }

        move := v2{direction.x * speed * dt, direction.y * speed * dt};
        entity->add_local_position(move);

        if Game.is_server() {
            pos := entity.world_position + v2{0, 0.4};
            hit_player, found := Scene.get_closest_component_in_range(pos, 0.8, Player);
            if found && hit_player != null {
                if hit_player.entity.id != owner_id {
                    hit_player.health -= damage;
                    if hit_player.health < 0 {
                        hit_player.health = 0;
                    }

                    hit_sfx := get_asset(SFX_Asset, "reusable_weapons/sounds/reusable-weapons/bullet_hit.wav");
                    sfx_desc := SFX.default_sfx_desc();
                    sfx_desc->set_position(pos);
                    sfx_desc.range_multiplier = 2.0;
                    SFX.play(hit_sfx, sfx_desc);

                    entity->destroy();
                    return;
                }
            }
        }
    }
}
